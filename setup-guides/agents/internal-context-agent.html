<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Internal context agent | FoundationaLLM </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Internal context agent | FoundationaLLM ">
      
      
      <link rel="icon" href="../../media/favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/solliancenet/foundationallm/blob/main/docs/setup-guides/agents/internal-context-agent.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../media/fllm-icon.svg" alt="FoundationaLLM">
            FoundationaLLM
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="internal-context-agent">Internal context agent</h1>

<p>The internal context  provides a pass-through mechanism that sends the user prompt directly to the large language model (LLM) without any additional processing or context. This is useful when the user prompt is already prepared and does not require any additional context.</p>
<h2 id="internal-context-agent-configuration">Internal context agent configuration</h2>
<p>The structure of an internal context agent is the following:</p>
<pre><code class="lang-json">{
  &quot;type&quot;: &quot;internal-context&quot;,
  &quot;name&quot;: &quot;&lt;name&gt;&quot;,
  &quot;object_id&quot;: &quot;/instances/&lt;instance_id&gt;/providers/FoundationaLLM.Agent/agents/&lt;name&gt;&quot;,
  &quot;description&quot;: &quot;&lt;description&gt;&quot;,  
  &quot;language_model&quot;: {
    &quot;type&quot;: &quot;openai&quot;,
    &quot;provider&quot;: &quot;microsoft&quot;,
    &quot;temperature&quot;: 0.0,
    &quot;use_chat&quot;: true,
    &quot;api_endpoint&quot;: &quot;FoundationaLLM:AzureOpenAI:API:Endpoint&quot;,
    &quot;api_key&quot;: &quot;FoundationaLLM:AzureOpenAI:API:Key&quot;,
    &quot;api_version&quot;: &quot;FoundationaLLM:AzureOpenAI:API:Version&quot;,
    &quot;version&quot;: &quot;FoundationaLLM:AzureOpenAI:API:Completions:ModelVersion&quot;,
    &quot;deployment&quot;: &quot;FoundationaLLM:AzureOpenAI:API:Completions:DeploymentName&quot;
  },
  &quot;sessions_enabled&quot;: true,
  &quot;conversation_history&quot;: {
    &quot;enabled&quot;: true,
    &quot;max_history&quot;: 5
  },
  &quot;gatekeeper&quot;: {
    &quot;use_system_setting&quot;: false,
    &quot;options&quot;: [
      &quot;ContentSafety&quot;,
      &quot;Presidio&quot;
    ]
  },
  &quot;orchestrator&quot;: &quot;LangChain&quot;
}
</code></pre>
<p>where:</p>
<ul>
<li><code>&lt;name&gt;</code> is the name of the agent.</li>
<li><code>&lt;instance_id&gt;</code> is the instance ID of the deployment.</li>
<li><code>&lt;description&gt;</code> is the description of the agent. Ensure that this description details the purpose of the agent.</li>
</ul>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td>The type of the agent - will always be <code>internal-context</code>. <strong><code>type</code> must be the first parameter in the request body.</strong></td>
</tr>
<tr>
<td><code>name</code></td>
<td>The name of the agent.</td>
</tr>
<tr>
<td><code>object_id</code></td>
<td>The object ID of the agent. Remove this element when creating an agent as this is generated by the Management API.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>The description of the agent, ensure this description details the purpose of the agent.</td>
</tr>
<tr>
<td><code>language_model</code></td>
<td>The language model configuration. This sample demonstrates the usage of the Azure OpenAI language model.</td>
</tr>
<tr>
<td><code>language_model.type</code></td>
<td>The type of the language model. Currently supporting OpenAI based langauge models.</td>
</tr>
<tr>
<td><code>language_model.provider</code></td>
<td>The provider of the language model. Currently supporting <code>microsoft</code> or <code>openai</code>.</td>
</tr>
<tr>
<td><code>language_model.temperature</code></td>
<td>The temperature value for the language model. A value between 0 and 1. Values closer to 0 return more factual information whereas values closer to 1 yield more creative responses.</td>
</tr>
<tr>
<td><code>language_model.use_chat</code></td>
<td>Determines the type of language model to use, as an example, when using Microsoft's Azure OpenAI, specifying <code>use_chat</code> equal to true will use the AzureChatOpenAI model vs. the AzureOpenAI model in LangChain.</td>
</tr>
<tr>
<td><code>language_model.api_endpoint</code></td>
<td>The configuration setting key that houses the API endpoint of the language model. The example above uses default FLLM values. Ensure this value is populated in application configuration.</td>
</tr>
<tr>
<td><code>language_model.api_key</code></td>
<td>The configuration setting key that houses a reference to a key vault value containing the API key for the language model service. Ensure these values are populated in key vault and app configuration.</td>
</tr>
<tr>
<td><code>language_model.api_version</code></td>
<td>The configuration setting key that houses the API version of the language model. The example above uses default FLLM values. Ensure this value is populated in application configuration.</td>
</tr>
<tr>
<td><code>language_model.version</code></td>
<td>The configuration setting key that houses the version of the language model deployment. The example above uses default FLLM values. Ensure this value is populated in application configuration.</td>
</tr>
<tr>
<td><code>language_model.deployment</code></td>
<td>The configuration setting key that houses the name given to the deployed language model. The example above uses default FLLM values. Ensure this value is populated in application configuration.</td>
</tr>
<tr>
<td><code>sessions_enabled</code></td>
<td>A boolean value that indicates whether the agent is session-less (false) or supports sessions(true).</td>
</tr>
<tr>
<td><code>conversation_history</code></td>
<td>The conversation history configuration.</td>
</tr>
<tr>
<td><code>conversation_history.enabled</code></td>
<td>Indicates if conversation history is retained for subsequent agent interactions(true).</td>
</tr>
<tr>
<td><code>conversation_history.max_history</code></td>
<td>indicates the number of messages to be retained.</td>
</tr>
<tr>
<td><code>gatekeeper</code></td>
<td>The gatekeeper configuration.</td>
</tr>
<tr>
<td><code>gatekeeper.use_system_setting</code></td>
<td>Indicates if the system settings are used for the gatekeeper.</td>
</tr>
<tr>
<td><code>gatekeeper.options</code></td>
<td>Contains the list of gatekeeper options. The sample provided overrides the system setting for gatekeeper and enables Azure Content Safety and MS Presidio in the messaging pipeline.</td>
</tr>
<tr>
<td><code>orchestrator</code></td>
<td>The orchestrator to be used for the agent. This can be set to <code>SemanticKernel</code> or <code>LangChain</code></td>
</tr>
</tbody>
</table>
<h2 id="managing-internal-context-agents">Managing internal context agents</h2>
<p>This section describes how to manage internal context agents using the Management API. <code>{{baseUrl}}</code> is the base URL of the Management API. <code>{{instanceId}}</code> is the unique identifier of the FLLM instance.</p>
<h3 id="retrieve">Retrieve</h3>
<pre><code class="lang-http">HTTP GET {{baseUrl}}/instances/{{instanceId}}/providers/FoundationaLLM.Agent/agents
</code></pre>
<h3 id="create-or-update">Create or update</h3>
<pre><code class="lang-http">HTTP POST {{baseUrl}}/instances/{{instanceId}}/providers/FoundationaLLM.Agent/agents/&lt;name&gt;
Content-Type: application/json

BODY
&lt;agent_configuration&gt;
</code></pre>
<p>where <code>&lt;agent_configuration&gt;</code> is the JSON agent configuration structure described above.</p>
<h3 id="delete">Delete</h3>
<pre><code class="lang-http">HTTP DELETE {{baseUrl}}/instances/{{instanceId}}/providers/FoundationaLLM.Agent/agents/&lt;name&gt;
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>FLLM currently implements logical deletes for Internal Context agents. This means that users cannot create an Internal Context agent with the same name as a deleted Internal Context agent. Support for purging Internal Context agents will be added in a future release.</p>
</div>
<h2 id="validating-an-internal-context-agent">Validating an internal context agent</h2>
<p>Once configured, the internal context agent can be validated using an API call to the <a href="../exposed-apis/core-api.html">Core API</a> or via the <a href="../quickstart.html">User Portal</a>.</p>
<blockquote>
<p><strong>Note</strong>: When validating through the user portal, ensure the <code>FoundationaLLM-AllowAgentHint</code> feature is enabled in the app configuration service. You may need to refresh your user portal browser for the agent to display in the agents list for selection.</p>
</blockquote>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/solliancenet/foundationallm/blob/main/docs/setup-guides/agents/internal-context-agent.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          © FoundationaLLM. All rights reserved. | Find out more about FoundationaLLM at <a href="https://foundationallm.ai">foundationallm.ai</a>.
        </div>
      </div>
    </footer>
  </body>
</html>
